# Requirements Archive: v1.2 Tech Debt Cleanup + Data Foundation

**Archived:** 2026-02-11
**Status:** SHIPPED

This is the archived requirements specification for v1.2.
For current requirements, see `.planning/REQUIREMENTS.md` (created for next milestone).

---

# Requirements: TCR Policy Scanner v1.2

**Defined:** 2026-02-11
**Core Value:** Tribal Leaders get timely, accurate, machine-scored policy intelligence that surfaces federal developments relevant to their climate resilience programs.

## v1.2 Requirements

### Config Hardening

- [x] **CONF-01**: Structural asks path resolved via config/pathlib (not hardcoded string) -- Phase 9
- [x] **CONF-02**: Centralized path constants module (`src/paths.py`) for all data/config file paths -- Phase 9

### Code Quality

- [x] **QUAL-01**: All 16 programs in `program_inventory.json` have complete field coverage (cfda, access_type, funding_type) -- Phase 10
- [x] **QUAL-02**: Dead code and unused imports removed codebase-wide (`ruff check` passes clean) -- Phase 10

### API Resilience

- [x] **RESL-01**: Circuit breaker pattern (CLOSED/OPEN/HALF_OPEN) wraps all external API calls -- Phase 11
- [x] **RESL-02**: Configurable retry counts and backoff multipliers in `scanner_config.json` -- Phase 11
- [x] **RESL-03**: Pipeline completes using cached data when an API is unreachable -- Phase 11
- [x] **RESL-04**: Health check reports API availability status for all 4 sources -- Phase 11

### Award Data Population

- [x] **AWRD-01**: Batch USASpending queries by CFDA number (11 program queries, not 592 Tribe queries) -- Phase 12
- [x] **AWRD-02**: Two-tier Tribe matching (curated alias table primary + rapidfuzz fallback >= 85) -- Phase 12
- [x] **AWRD-03**: Award cache files populated for 592 Tribes with real USASpending data -- Phase 12
- [x] **AWRD-04**: 450+ Tribes have at least one non-zero award record -- Phase 12 (achieved 451 via gap closure plan 12-04)

### Hazard Data Population

- [x] **HZRD-01**: FEMA NRI county-level dataset downloaded and cached -- Phase 13
- [x] **HZRD-02**: Tribe-to-county geographic crosswalk built (AIANNH + county boundaries) -- Phase 13
- [x] **HZRD-03**: County NRI scores aggregated to Tribe level (area-weighted) -- Phase 13
- [x] **HZRD-04**: Top 5 hazards per Tribe extracted and ranked -- Phase 13
- [x] **HZRD-05**: USFS wildfire risk data populated for fire-prone Tribes (300+) -- Phase 13
- [x] **HZRD-06**: Hazard profile files populated for 592 Tribes with real data -- Phase 13

### Integration & Validation

- [x] **INTG-01**: Economic impact section auto-computes using real award + hazard data -- Phase 14
- [x] **INTG-02**: End-to-end packet generation produces complete packets for 400+ Tribes -- Phase 14 (384 Doc A + 592 Doc B)
- [x] **INTG-03**: Data validation script reports coverage across all data caches -- Phase 14
- [x] **INTG-04**: VERIFICATION.md documents v1.2 testing methodology -- Phase 14
- [x] **INTG-05**: GitHub Pages deployment config finalized -- Phase 14
- [x] **INTG-06**: SquareSpace placeholder URL replaced with production URL -- Phase 14

## Already Completed (Fire Keeper, 2026-02-11)

These tech debt items were resolved during the research phase:

- [x] **TD-01**: Config-driven fiscal year (new `src/config.py` with dynamic fiscal year)
- [x] **TD-02**: Config-driven `graph_schema.json` path (PROJECT_ROOT via pathlib)
- [x] **TD-05**: Deduplicate `_format_dollars` (new `src/utils.py` as single source of truth)
- [x] **TD-06**: Fix logger naming (14 files fixed to `__name__`)

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| CONF-01 | Phase 9 | Complete |
| CONF-02 | Phase 9 | Complete |
| QUAL-01 | Phase 10 | Complete |
| QUAL-02 | Phase 10 | Complete |
| RESL-01 | Phase 11 | Complete |
| RESL-02 | Phase 11 | Complete |
| RESL-03 | Phase 11 | Complete |
| RESL-04 | Phase 11 | Complete |
| AWRD-01 | Phase 12 | Complete |
| AWRD-02 | Phase 12 | Complete |
| AWRD-03 | Phase 12 | Complete |
| AWRD-04 | Phase 12 | Complete |
| HZRD-01 | Phase 13 | Complete |
| HZRD-02 | Phase 13 | Complete |
| HZRD-03 | Phase 13 | Complete |
| HZRD-04 | Phase 13 | Complete |
| HZRD-05 | Phase 13 | Complete |
| HZRD-06 | Phase 13 | Complete |
| INTG-01 | Phase 14 | Complete |
| INTG-02 | Phase 14 | Complete |
| INTG-03 | Phase 14 | Complete |
| INTG-04 | Phase 14 | Complete |
| INTG-05 | Phase 14 | Complete |
| INTG-06 | Phase 14 | Complete |

---

## Milestone Summary

**Shipped:** 24 of 24 v1.2 requirements (+ 4 pre-resolved by Fire Keeper)
**Adjusted:** AWRD-04 initially missed (418 vs 450), resolved by gap closure plan 12-04 (6 rounds of housing authority alias curation, final: 451)
**Dropped:** None

---
*Archived: 2026-02-11 as part of v1.2 milestone completion*
