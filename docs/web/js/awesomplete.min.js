// Awesomplete 1.1.7 - MIT License (c) Lea Verou - https://leaverou.github.io/awesomplete
!function(){function t(t){var i=Array.isArray(t)?{list:t}:t||{};for(var s in e.all.push(this),this.input=e.$(i.input||t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-expanded","false"),this.options={minChars:1,maxItems:10,autoFirst:!1,filter:e.FILTER_CONTAINS,sort:e.SORT_BYLENGTH,item:e.ITEM,replace:e.REPLACE},this.options)void 0!==i[s]&&(this.options[s]=i[s]);this.list=i.list||[],this.container=e.$create("div",{className:"awesomplete",around:this.input}),this.ul=e.$create("ul",{hidden:"hidden",inside:this.container,id:"awesomplete_list_"+e.count++}),this.input.setAttribute("aria-owns",this.ul.id),this.status=e.$create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),e.$.bind(this.input,{input:this.evaluate.bind(this),blur:this._events.blur=this.close.bind(this,{reason:"blur"}),keydown:this._events.keydown=function(t){var e=t.keyCode;if(this.opened)if(13===e&&this.selected)t.preventDefault(),this.select();else if(27===e)this.close({reason:"esc"});else if(38===e||40===e)t.preventDefault(),this["goto"](38===e?this.selected-1:this.selected+1)}.bind(this)}),e.$.bind(this.ul,{mousedown:function(t){var e=t.target;if("LI"===e.tagName){t.preventDefault(),this.select(e,t)}}.bind(this)}),this.input.hasAttribute("list")?this.list="#"+this.input.getAttribute("list"):this.list=this.options.list||[],e.$.fire(this.input,"awesomplete-ready")}function e(e){t.call(this,e)}var i=Array.prototype.slice;return t.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if(t=e.$(t),t&&t.children){var i=[];i.push.apply(i,t.children),this._list=i.map(function(t){return t.textContent.trim()})}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return!this.ul.hasAttribute("hidden")},close:function(t){this.opened&&(this.ul.setAttribute("hidden",""),this.index=-1,this.input.setAttribute("aria-expanded","false"),e.$.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.ul.removeAttribute("hidden"),this.input.setAttribute("aria-expanded","true"),this.autoFirst&&this.index===-1&&this["goto"](0),e.$.fire(this.input,"awesomplete-open")},next:function(){var t=this.ul.children.length;this["goto"](this.selected<t-1?this.selected+1:-1)},previous:function(){var t=this.ul.children.length;this["goto"](this.selected>-1?this.selected-1:t-1)},"goto":function(t){var i=this.ul.children;this.selected>-1&&(i[this.index].setAttribute("aria-selected","false"),i[this.index].classList.remove("selected")),this.index=t,t>-1&&i.length>0&&(i[t].setAttribute("aria-selected","true"),i[t].classList.add("selected"),this.status.textContent=i[t].textContent,this.ul.scrollTop=i[t].offsetTop-this.ul.clientHeight+i[t].clientHeight,e.$.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,i){if(t?this.index=e.$.siblingIndex(t):t=this.ul.children[this.index],t){var s=this.suggestions[this.index];e.$.fire(this.input,"awesomplete-select",{text:s,origin:i||t})&&(this.replace(s),this.close({reason:"select"}),e.$.fire(this.input,"awesomplete-selectcomplete",{text:s}))}},evaluate:function(){var t=this,i=this.input.value;i.length>=this.options.minChars&&this._list.length>0?!function(){t.index=-1,t.ul.textContent="",t.suggestions=t._list.map(function(s){return new e(t.options.item(s,i))}).filter(function(e){return t.options.filter(e,i)}).sort(t.options.sort).slice(0,t.options.maxItems),t.suggestions.forEach(function(e){t.ul.appendChild(e.li)}),0===t.suggestions.length?t.close({reason:"nomatches"}):t.open()}():this.close({reason:"nomatches"})},_events:{blur:null,keydown:null}},t.$=function(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null},t.$.create=function(t,e){var i=document.createElement(t);for(var s in e){var n=e[s];"inside"===s?n.appendChild(i):"around"===s?(n.parentNode&&n.parentNode.insertBefore(i,n),i.appendChild(n)):s in i?i[s]=n:i.setAttribute(s,n)}return i},t.$.bind=function(t,e){for(var i in e){var s=e[i];i.split(/\s+/).forEach(function(e){t.addEventListener(e,s)})}},t.$.fire=function(t,e,i){var s=document.createEvent("HTMLEvents");return s.initEvent(e,!0,!0),i&&Object.keys(i).forEach(function(t){s[t]=i[t]}),t.dispatchEvent(s)},t.$.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},t.FILTER_CONTAINS=function(t,e){return RegExp(e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),"i").test(t.value||t)},t.FILTER_STARTSWITH=function(t,e){return RegExp("^"+e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),"i").test(t.value||t)},t.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},t.ITEM=function(t,e){var s=""===e?t:t.replace(RegExp(e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&"),"gi"),"<mark>$&</mark>");return i.forEach.call(arguments,function(t){if(t&&t.li){var e=t.li;return s=e instanceof Element?e:e}}),e.$create("li",{textContent:s,"aria-selected":"false"})},t.REPLACE=function(t){this.input.value=t.value||t},t.count=0,t.all=[],e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.item=function(t,e){return"string"==typeof t?new e.constructor(Awesomplete.ITEM(t,e)):t},Object.defineProperty(e.prototype,"value",{get:function(){return this.label||this.data[0]||""},set:function(t){this.label=t}}),window.Awesomplete=t}();
